name: 'Mirror action'
description: 'Mirror changes to another repository'
inputs:
  mirror-repo:
    description: 'Mirroring to'
    required: true
  ssh-private-key:
    description: 'Private key'
    required: true
runs:
  using: 'composite'
  steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: 0
    - uses: webfactory/ssh-agent@v0.5.4
      with:
        ssh-private-key: ${{ inputs.ssh-private-key }}
    - run: git push --mirror ${{ inputs.mirror-repo }}
